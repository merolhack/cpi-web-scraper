# Changelog

## [0.1.16] - 2025-11-29
- Implemented "Once per Month" scraping logic to avoid redundant data collection.
- Added batching to `main.py` (processes 3 products per run).
- Added `url` column to `cpi_establishments` table.
- Added `get_products_to_scrape` RPC for optimized product fetching.

## [0.1.15] - 2025-11-29
- Refactored `main.py` to fetch active products dynamically from Supabase `cpi_products` table.
- Removed hardcoded product EAN and Name.
- Scraper now iterates through all active products in the database.

## [0.1.14] - 2025-11-30
- Fixed `httpx.AsyncClient` initialization to use `proxy` argument (compatible with httpx >= 0.28.0).
- Fixed Playwright launch logic to handle cases where no proxy is available (skips `per-context` mode).

## [0.1.13] - 2025-11-29
- Added Supabase Project ID logging to debug environment mismatch.
- Minor improvements to error logging in `main.py`.

## [0.1.12] - 2025-11-29
- Integrated `ProxyRotator` into `main.py`.
- Replaced in-memory `ProxyManager` with Supabase-backed proxy rotation.
- Scrapers now fetch validated MX proxies from Supabase and report health status.

## [0.1.11] - 2025-11-29
- Added Robust Proxy System components (Supabase-backed).
- Added `scripts/setup_proxies.sql` for database migration.
- Added `scripts/proxy_harvester.py` for fetching and validating proxies.
- Added `proxy_client.py` for rotating proxies via Supabase.

## [0.1.10] - 2025-11-29
- Implemented robust Free Proxy Rotation System.
- Added `ProxyManager` to fetch and rotate proxies from GitHub sources.
- Updated all scrapers to use dynamic proxies with retry logic.

## [0.1.9] - 2025-11-29
- Added enhanced headers (Referer, Origin, etc.) to La Comer scraper to bypass 403 errors in cloud environment.

## [0.1.8] - 2025-11-29
- Fixed La Comer scraper using correct API endpoint.
- Increased timeouts for Walmart and Bodega Aurrera scrapers.

## [0.1.7] - 2025-11-29
- Triggering new deployment to verify fix.

## [0.1.6] - 2025-11-28
- Upgraded `supabase` to `2.24.0` to resolve `TypeError` with modern dependencies.

## [0.1.5] - 2025-11-28
- Fixed Supabase client `TypeError` by pinning `httpx` to `<0.28.0`.

## [0.1.4] - 2025-11-28
- Fixed Supabase credentials error in GitHub Actions by adding environment configuration.

## [0.1.3] - 2025-11-28
- Fixed GitHub Actions dependency error by pinning runner to ubuntu-22.04.

## [0.1.2] - 2025-11-28
- Automated release updates.
- Unit tests added.
## [0.1.1] - 2025-11-28
- Automated release updates.
- Unit tests added.
## [0.1.0] - 2025-11-27
- Initial release of the Hybrid Web Scraper.
- Implemented Walmart and Bodega Aurrera scrapers (Playwright).
- Implemented Chedraui, Soriana, and La Comer scrapers (HTTPX).
- Integrated Supabase RPC `add_product_and_price`.